<%- include("partials/header") -%>

<h1>Home</h1>
<p><%=starterText%></p>

<%# documentation for .forEach: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach %>
<% posts.forEach(function(post){ %>
<%# shorten length of the title to 40 characters %>
<div class="post">
  <%if(post.title.length>40){ %>
  <h4><%=post.title%>
    <form action="/delete" method="post">
      <button value="<%= post._id%>" name="deleteButton" type="submit" class="btn btn-outline-info deleteButton btn-sm">Delete</button>
    </form>
  </h4>
  <% }else{ %>
  <h2><%=post.title%>
    <form action="/delete" method="post">
      <button value="<%= post._id%>" name="deleteButton" type="submit" class="btn btn-outline-info deleteButton btn-sm">Delete</button>
    </form>

  </h2>
  <%}%>

  <%# shorten length of the body to 100 characters %>
  <%if(post.body.length>100){ %>
  <p><%= post.body.substring(0,100)+" ..." %>
    <a href="/posts/<%=post.title%>">Read More</a>
  </p>
  <% }else{ %>
  <p>
    <%=post.body%>
  </p>
  <%}%>
</div>


<% }); %>
  <%-include("partials/footer") -%>
